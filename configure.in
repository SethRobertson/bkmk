dnl
dnl $Id: configure.in,v 1.38 2002/09/04 08:11:02 dupuy Exp $
dnl
dnl ++Copyright LIBBK++
dnl
dnl Copyright (c) 2001 The Authors.  All rights reserved.
dnl
dnl This source code is licensed to you under the terms of the file
dnl LICENSE.TXT in this release for further details.
dnl
dnl Mail <projectbaka@baka.org> for further information
dnl
dnl --Copyright LIBBK--
dnl
dnl
dnl Autoconf configuration
dnl
AC_REVISION($Revision: 1.38 $)dnl
AC_INIT(Make.bkvariables)
AC_CONFIG_AUX_DIR(acaux)

echo 
echo  "		CONFIGURING MAKEFILE VARIABLES"
echo

AC_PROG_CC

if test "$CC" "!=" "gcc"; then
   echo
   echo "WARNING: Attempting to compile without gcc may be painful."
   echo "You have been warned."
   echo
fi

AC_PROG_CXX
AC_PROG_LEX
AC_PROG_YACC
AC_PROG_CPP
AC_PROG_CXXCPP
AC_PROG_CC_C_O

AC_PROG_INSTALL
AC_PROG_LN_S
AC_PATH_PROG(PWDPROG, pawd, pwd)

# test for oracle
echo $ECHO_N "checking for Oracle... $ECHO_C" >&6
if test x${ORACLE_HOME} = x; then
  export HAVE_ORACLE=false
  echo "${ECHO_T}no" >&6
else
  AC_DEFINE(HAVE_ORACLE)
  export HAVE_ORACLE=true
  AC_SUBST(ORACLE_HOME)
  echo "${ECHO_T}$ORACLE_HOME" >&6
fi
AC_SUBST(HAVE_ORACLE)


echo $ECHO_N "checking for compiler warning flags... $ECHO_C" >&6
SAVE_CFLAGS="$CFLAGS"
CFLAGS="-W -Wunused -Wno-unused-parameter"
AC_TRY_COMPILE(,,BK_SPECIAL_DEBUG="$CFLAGS",BK_SPECIAL_DEBUG="-W")
AC_SUBST(BK_SPECIAL_DEBUG)
CFLAGS="$SAVE_CFLAGS"
echo "${ECHO_T}$BK_SPECIAL_DEBUG" >&6

AC_LIBTOOL_WIN32_DLL
AC_LIBTOOL_DLOPEN
AC_PROG_LIBTOOL

AC_C__FUNC__
AC_CONSTRUCTORS
AC_SYS_LARGEFILE
AC_CHECK_HEADERS(net/ethernet.h netinet/if_ether.h)
AC_SA_LEN
AC_FUNC_INET_PTON

AC_FUNC_MKTIME
if test $ac_cv_func_working_mktime = no; then
 AC_DEFINE(MKTIME_HAS_BUGS)
fi
AC_CHECK_FUNCS(ntohll memmem memrchr strndup strnlen strverscmp)
AC_CHECK_FUNCS(strptime gmtime_r timegm)
AC_FUNC_STRFTIME
AC_FUNC_GETTEXT
AC_STACKDIRECTION
AC_FUNC_ALLOCA

AC_PATH_PROG(RM, rm)
AC_PATH_PROG(FALSE, false)
AC_PATH_PROGS(MV, mv cp, $FALSE)
AC_PATH_PROG(MKDIR, mkdir, $FALSE)

AC_PATH_PROG(CAT, cat, $FALSE)
AC_PATH_PROG(BASENAME, basename, $FALSE)
AC_PATH_PROG(SED, sed, $FALSE)
AC_PATH_PROG(TEST, test, $FALSE)

AC_PATH_PROG(PERL, perl, $FALSE)

AC_PATH_PROG(XML2CONFIG, xml2-config, $FALSE)

# not everybody puts /usr/local/gnu/bin in their PATH
AC_PATH_PROG(BGCC, bgcc, $FALSE, $PATH:/usr/local/gnu/bin)

AC_PATH_PROG(INSURE, insure, $FALSE, $PATH:$PARASOFT/bin:/usr/local/parasoft/bin)

# note - don't use $PATH_SEPARATOR in this file; we always use Cygwin make

AC_PATH_PROG(JAVAC, javac, $FALSE, $PATH:/usr/java/jdk/bin:/usr/local/java/jdk/bin)
AC_PATH_PROG(JAR, jar, $FALSE, $PATH:/usr/java/jdk/bin:/usr/local/java/jdk/bin)

AC_PATH_PROG(JHINDEXER, jhindexer, $FALSE, $PATH:/usr/local/java/bin)

AC_PATH_PROG(DOXYGEN, doxygen, $FALSE)
AC_CHECK_PROG(HAVE_DOT, dot, YES, NO)
AC_PATH_PROGS(BROWSER, browser netscape konqueror mozilla iexplore.exe lynx,
	      $FALSE, $PATH:/cygdrive/c/progra~1/intern~1)

AC_PATH_PROG(AR, ar)

AC_DEFINE_UNQUOTED(PATH_SEPARATOR, "$PATH_SEPARATOR")
AC_CONFIG_HEADER(libbk_autoconf.h)

AC_SUBST(link_static_flag)

AC_OUTPUT(Make.config)




